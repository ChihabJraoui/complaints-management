function EasyUp(options){this.options={id:null,url:null,direction:"ltr",attach:null,trigger:"submit",thumbnail_width:100,thumbnail_height:56,uploadText:"<strong>Drag and drop</strong> files here <br /> Or <strong>Browse</strong> to begin upload"};this.options=jQuery.extend(true,this.options,options);if(this.options.id==null){this.options.id="sweetbox-"+EasyUp.getUniqueID()}this.id=this.options.id;this._createElements=function(){this.easyup_upload=$("<div />",{class:"easyup--upload"}).appendTo(this.options.attach);this.easyup_form=$("<form />",{id:"EasyUp-form-"+this.id,encrypte:"multipart/form-data"}).appendTo(this.easyup_upload);this.easyup_label=$("<label />",{for:"easyup-input"}).appendTo(this.easyup_form);$("<img />",{src:"icons/cloud_upload.svg"}).appendTo(this.easyup_label);$("<span />",{html:this.options.uploadText}).appendTo(this.easyup_label);this.easyup_input=$("<input />",{id:"easyup-input",type:"file",name:"files[]",multiple:"multiple"}).appendTo(this.easyup_form);this.easyup_files=$("<div />",{class:"easyup--files"}).appendTo(this.options.attach);this.easyup_table=$("<table />",{class:"table"}).appendTo(this.easyup_files)};this._createFilePreview=function(file){this.easyup_row=$("<tr />").prependTo(this.easyup_table);this.easyup_fileInfo=$("<td />",{id:"file-info-"+file.id,class:"file-info",html:file.name+" / "+EasyUp.formatFileSize(file.size)}).css("width","100%").appendTo(this.easyup_row);$("<i />",{id:"file-status-"+file.id,class:"glyphicon glyphicon-refresh text-primary"}).appendTo(this.easyup_fileInfo);var progress=$('<div class="progress" />').appendTo(this.easyup_fileInfo);$("<div />",{id:"progress-bar-"+file.id,class:"progress-bar progress-bar-striped active","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0}).appendTo(progress)};this._sendAjaxRequest=function(file){var data=new FormData;data.append("file",file);$.ajax({url:this.options.url,type:"POST",data:data,contentType:false,processData:false,cache:false,dataType:"JSON",xhr:function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener("progress",function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100)}$("#progress-bar-"+file.id).css("width",+percent+"%")},true)}return xhr},error:function(xhr){},success:function(result){var fileInfo=$("#file-info-"+file.id),fileStatus=$("#file-status-"+file.id);if(result.success==1){fileInfo.find(".progress-bar").addClass("progress-bar-success").removeClass("progress-bar-striped active");fileStatus.removeClass("glyphicon-refresh text-primary").addClass("glyphicon-ok text-success")}else{}}})};this._run=function(){this.options.url!=null||console.log("Error: url property is not set !");if(this.options.attach!=null){this.options.attach.addClass("easyup");this._createElements();this.easyup_form.on("change",function(){var files=this.easyup_input[0].files;for(var i=0;i<files.length;i++){files[i].id=(new Date).getTime();this._createFilePreview(files[i]);this._sendAjaxRequest(files[i])}}.bind(this)).on("dragover",function(){this.easyup_upload.addClass("is-dragover")}.bind(this)).on("dragleave",function(){this.easyup_upload.removeClass("is-dragover")}.bind(this))}else{console.log("EasyUp Error: Form Element is not set !!")}};this._run()}EasyUp.formatFileSize=function(bytes){if(bytes==0)return"0 Byte";var k=1024;var dm=2;var sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+" "+sizes[i]};EasyUp.getUniqueID=function(){var i=1;return function(){return i++}}();jQuery.fn.EasyUp=function(options){options=jQuery.extend(options,{attach:this});return new EasyUp(options)};